version: 2.1
jobs:
  build:
    docker:
      - image: ruby:3.1.2
    steps:
      - checkout
      - run:
          name: Build ruby version
          command: |
            cd ruby
            gem install bundler
            gem build ballantine.gemspec
            gem install ballantine
            cd ..
      - run:
          name: Run ballantine
          command: |
            echo "$ ballantine"
            ballantine
            echo "$ ballantine version"
            ballantine version
            echo "$ ballantine init"
            ballantine init
            echo "$ ballantine diff migration/ruby main"
            ballantine diff migration/ruby main
